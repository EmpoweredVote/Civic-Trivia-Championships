---
phase: 01-foundation-auth
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - frontend/src/store/authStore.ts
  - frontend/src/services/authService.ts
  - frontend/src/services/api.ts
  - frontend/src/types/auth.ts
  - frontend/src/pages/Login.tsx
  - frontend/src/pages/Signup.tsx
  - frontend/src/components/ui/Input.tsx
  - frontend/src/components/ui/Button.tsx
  - frontend/package.json
autonomous: true

must_haves:
  truths:
    - "Login page displays email and password fields"
    - "Signup page displays name, email, and password fields"
    - "Forms show validation errors from server"
    - "Successful login stores access token in memory"
    - "Auth state is accessible from components via useAuthStore"
  artifacts:
    - path: "frontend/src/store/authStore.ts"
      provides: "Zustand auth state management"
      exports: ["useAuthStore"]
    - path: "frontend/src/services/authService.ts"
      provides: "Auth API calls"
      exports: ["authService"]
    - path: "frontend/src/pages/Login.tsx"
      provides: "Login page component"
      min_lines: 50
    - path: "frontend/src/pages/Signup.tsx"
      provides: "Signup page component"
      min_lines: 50
  key_links:
    - from: "frontend/src/pages/Login.tsx"
      to: "frontend/src/services/authService.ts"
      via: "login API call"
      pattern: "authService\\.login"
    - from: "frontend/src/pages/Login.tsx"
      to: "frontend/src/store/authStore.ts"
      via: "state update on success"
      pattern: "useAuthStore|setAuth"
---

<objective>
Build the frontend authentication layer with Zustand state management, API service, and responsive auth forms.

Purpose: Provide user-facing login and signup pages with proper error handling, form validation feedback, and state management that stores tokens in memory (not localStorage) per RESEARCH.md security guidelines.
Output: Working Login and Signup pages that communicate with backend auth endpoints and update auth state.
</objective>

<execution_context>
@C:\Users\Chris\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Chris\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-auth/01-RESEARCH.md
@.planning/phases/01-foundation-auth/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create auth types, Zustand store, and API service</name>
  <files>
    frontend/src/types/auth.ts
    frontend/src/store/authStore.ts
    frontend/src/services/api.ts
    frontend/src/services/authService.ts
    frontend/package.json
  </files>
  <action>
    Set up frontend auth infrastructure:

    1. Add zustand to package.json dependencies

    2. Create src/types/auth.ts:
       - interface User { id: number; email: string; name: string }
       - interface AuthState { accessToken: string | null; user: User | null; isAuthenticated: boolean; isLoading: boolean }
       - interface LoginCredentials { email: string; password: string }
       - interface SignupData { email: string; password: string; name: string }
       - interface AuthResponse { accessToken: string; user: User }
       - interface AuthError { error?: string; errors?: Array<{ field: string; message: string }> }

    3. Create src/store/authStore.ts:
       - Import create from zustand
       - Interface AuthStore extends AuthState with:
         - setAuth(token: string, user: User): void
         - clearAuth(): void
         - setLoading(loading: boolean): void
       - Create store with initial state: accessToken: null, user: null, isAuthenticated: false, isLoading: true
       - setAuth: sets token, user, isAuthenticated: true, isLoading: false
       - clearAuth: sets token: null, user: null, isAuthenticated: false, isLoading: false
       - setLoading: sets isLoading

    4. Create src/services/api.ts:
       - Export API_URL from import.meta.env.VITE_API_URL || 'http://localhost:3000'
       - Export async function apiRequest<T>(url: string, options?: RequestInit): Promise<T>
         - Merges default options: credentials: 'include' (for cookies), headers: { 'Content-Type': 'application/json' }
         - Fetches API_URL + url
         - If response not ok, parse error JSON and throw
         - Return response.json()

    5. Create src/services/authService.ts:
       - Import apiRequest from api.ts
       - Import types from auth.ts
       - Export authService object:
         - signup(data: SignupData): Promise<{ message: string; user: User }>
           - POST /auth/signup with JSON.stringify(data)
         - login(credentials: LoginCredentials): Promise<AuthResponse>
           - POST /auth/login with JSON.stringify(credentials)
         - logout(accessToken: string): Promise<{ message: string }>
           - POST /auth/logout with Authorization header
         - refresh(): Promise<AuthResponse>
           - POST /auth/refresh (cookie sent automatically)
  </action>
  <verify>
    TypeScript compiles: cd frontend && npx tsc --noEmit
    Zustand store imports correctly in components
  </verify>
  <done>
    Auth types defined, Zustand store manages auth state in memory, API service handles all auth endpoints
  </done>
</task>

<task type="auto">
  <name>Task 2: Create reusable UI components</name>
  <files>
    frontend/src/components/ui/Input.tsx
    frontend/src/components/ui/Button.tsx
  </files>
  <action>
    Create styled form components:

    1. Create src/components/ui/Input.tsx:
       - Props: id, label, type, value, onChange, error?, placeholder?, autoComplete?, required?
       - Render label with htmlFor
       - Render input with Tailwind classes:
         - Base: w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 sm:text-sm
         - Normal: border-gray-300
         - Error: border-red-500 focus:ring-red-500 focus:border-red-500
       - If error, render error message in red text below input
       - Label: text-sm font-medium text-gray-700 mb-1

    2. Create src/components/ui/Button.tsx:
       - Props: children, type?, onClick?, disabled?, loading?, variant?: 'primary' | 'secondary'
       - Tailwind classes:
         - Base: w-full flex justify-center py-2 px-4 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors
         - Primary: border-transparent text-white bg-teal-600 hover:bg-teal-700 focus:ring-teal-500
         - Secondary: border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-teal-500
       - If loading, show "Loading..." text or spinner
  </action>
  <verify>
    Components render without errors
    TypeScript types are correct
  </verify>
  <done>
    Reusable Input and Button components with proper styling and error states
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Login and Signup pages</name>
  <files>
    frontend/src/pages/Login.tsx
    frontend/src/pages/Signup.tsx
  </files>
  <action>
    Build auth pages with responsive design:

    1. Create src/pages/Login.tsx:
       - State: email, password, error (string), fieldErrors (Record<string, string>), loading
       - Use useAuthStore to get setAuth
       - Use useNavigate from react-router-dom
       - handleSubmit: preventDefault, setLoading(true), try authService.login, setAuth(accessToken, user), navigate('/'), catch error and set error/fieldErrors, finally setLoading(false)
       - Layout: min-h-screen flex items-center justify-center bg-gray-50 px-4 sm:px-6 lg:px-8
       - Card: max-w-md w-full bg-white shadow-lg rounded-lg p-6 sm:p-8
       - Heading: "Sign in to your account", text-2xl font-bold text-gray-900 text-center mb-6
       - Form with email and password Input components
       - Show general error in red alert box if present
       - Submit Button with loading state
       - Link to signup: "Don't have an account? Sign up" with text-teal-600 hover:text-teal-500
       - Mobile-first responsive: padding adjusts with sm: and lg: breakpoints

    2. Create src/pages/Signup.tsx:
       - State: name, email, password, error, fieldErrors, loading
       - Similar structure to Login
       - handleSubmit: authService.signup, then auto-login with authService.login, setAuth, navigate('/')
       - Form with name, email, password Input components
       - Password hint: "Must be at least 8 characters with uppercase, lowercase, and number"
       - Link to login: "Already have an account? Sign in"

    Both pages should:
    - Parse fieldErrors from error response (errors array)
    - Show field-specific errors under each input
    - Show general error at top if no field-specific errors
    - Be mobile responsive (works on phones and tablets per PERF-05)
  </action>
  <verify>
    Pages render without errors
    Form fields display correctly
    Error states show appropriately
    Responsive design works on mobile viewport
  </verify>
  <done>
    Login and Signup pages render with forms, handle errors, update auth state on success
  </done>
</task>

</tasks>

<verification>
1. Zustand store: useAuthStore hook works, setAuth/clearAuth update state
2. API service: authService methods return correct types
3. Login page: Renders form, shows errors, calls login API
4. Signup page: Renders form with name field, shows password requirements
5. Mobile responsive: Pages work on 375px viewport
6. Error handling: Field errors show under inputs, general errors show in alert
</verification>

<success_criteria>
- Zustand store manages auth state in memory (not localStorage)
- authService handles signup, login, logout, refresh API calls
- Login page with email/password fields and error display
- Signup page with name/email/password fields and error display
- Both pages responsive for mobile/tablet (PERF-05)
- Server errors display clearly to users (AUTH-05)
- Successful auth updates store and navigates to home
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-auth/01-03-SUMMARY.md`
</output>
