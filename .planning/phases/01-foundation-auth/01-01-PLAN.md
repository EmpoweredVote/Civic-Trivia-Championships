---
phase: 01-foundation-auth
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - backend/package.json
  - backend/tsconfig.json
  - backend/src/server.ts
  - frontend/package.json
  - frontend/tsconfig.json
  - frontend/vite.config.ts
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/index.html
  - frontend/tailwind.config.js
  - frontend/postcss.config.js
  - .env.example
autonomous: true

must_haves:
  truths:
    - "Backend server starts on port 3000"
    - "Frontend dev server starts on port 5173"
    - "TypeScript compiles without errors"
    - "Tailwind CSS is configured and working"
  artifacts:
    - path: "backend/src/server.ts"
      provides: "Express server entry point"
      min_lines: 20
    - path: "frontend/src/App.tsx"
      provides: "React app entry point"
      min_lines: 10
    - path: "frontend/tailwind.config.js"
      provides: "Tailwind configuration"
      contains: "content"
  key_links:
    - from: "frontend/src/main.tsx"
      to: "frontend/src/App.tsx"
      via: "React render"
      pattern: "import.*App"
---

<objective>
Initialize the project with a monorepo structure containing a Vite React frontend and Express TypeScript backend.

Purpose: Establish the foundation for the authentication system with proper TypeScript configuration, Tailwind CSS, and development tooling.
Output: Working frontend and backend dev servers with hot reload, TypeScript compilation, and Tailwind CSS styling.
</objective>

<execution_context>
@C:\Users\Chris\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Chris\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-auth/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize backend Express server with TypeScript</name>
  <files>
    backend/package.json
    backend/tsconfig.json
    backend/src/server.ts
    backend/.env.example
  </files>
  <action>
    Create backend directory with Express TypeScript setup:

    1. Initialize package.json with:
       - name: "civic-trivia-backend"
       - Scripts: "dev": "tsx watch src/server.ts", "build": "tsc", "start": "node dist/server.js"
       - Dependencies: express, cors, cookie-parser, dotenv
       - DevDependencies: typescript, tsx, @types/express, @types/cors, @types/cookie-parser, @types/node

    2. Create tsconfig.json with:
       - target: ES2022, module: NodeNext, moduleResolution: NodeNext
       - outDir: ./dist, rootDir: ./src
       - strict: true, esModuleInterop: true

    3. Create src/server.ts with:
       - Express app with CORS configured for http://localhost:5173
       - Cookie parser middleware
       - JSON body parser
       - Health check endpoint GET /health returning { status: "ok" }
       - Listen on PORT from env or 3000
       - Log startup message

    4. Create .env.example with:
       - PORT=3000
       - FRONTEND_URL=http://localhost:5173
       - JWT_SECRET=your-jwt-secret-here-min-32-chars
       - JWT_REFRESH_SECRET=your-refresh-secret-here-min-32-chars
       - DATABASE_URL=postgresql://user:password@localhost:5432/civic_trivia
       - REDIS_URL=redis://localhost:6379
  </action>
  <verify>
    cd backend && npm install && npm run dev (should start on port 3000)
    curl http://localhost:3000/health returns { "status": "ok" }
  </verify>
  <done>
    Backend server starts, TypeScript compiles, health endpoint responds
  </done>
</task>

<task type="auto">
  <name>Task 2: Initialize frontend Vite React with TypeScript and Tailwind</name>
  <files>
    frontend/package.json
    frontend/tsconfig.json
    frontend/tsconfig.node.json
    frontend/vite.config.ts
    frontend/tailwind.config.js
    frontend/postcss.config.js
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/src/index.css
    frontend/index.html
  </files>
  <action>
    Create frontend directory with Vite React TypeScript setup:

    1. Initialize package.json with:
       - name: "civic-trivia-frontend"
       - Scripts: "dev": "vite", "build": "tsc && vite build", "preview": "vite preview"
       - Dependencies: react, react-dom, react-router-dom
       - DevDependencies: @types/react, @types/react-dom, @vitejs/plugin-react, typescript, vite, tailwindcss, postcss, autoprefixer

    2. Create vite.config.ts with:
       - React plugin
       - Server port 5173
       - Proxy /api to http://localhost:3000

    3. Create tailwind.config.js with:
       - content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"]
       - Extend theme with Empowered.Vote teal: { DEFAULT: "#0d9488", 50-900 range }

    4. Create postcss.config.js with tailwindcss and autoprefixer

    5. Create src/index.css with:
       - @tailwind base, components, utilities directives

    6. Create index.html with:
       - Root div, script module pointing to /src/main.tsx
       - Title: "Civic Trivia Championship"

    7. Create src/main.tsx with:
       - React 18 createRoot rendering App
       - Import index.css

    8. Create src/App.tsx with:
       - Simple component showing "Civic Trivia Championship" heading
       - Use Tailwind classes: min-h-screen, bg-gray-50, flex, items-center, justify-center
       - Heading with text-teal-600 to verify Tailwind theme

    9. Create tsconfig.json and tsconfig.node.json with React/Vite TypeScript settings
  </action>
  <verify>
    cd frontend && npm install && npm run dev (should start on port 5173)
    Visit http://localhost:5173 - shows "Civic Trivia Championship" with teal color
    Tailwind classes apply correctly
  </verify>
  <done>
    Frontend dev server starts, React renders, Tailwind CSS applies with custom teal theme
  </done>
</task>

<task type="auto">
  <name>Task 3: Create root package.json with workspace scripts</name>
  <files>
    package.json
    .gitignore
    .env.example
  </files>
  <action>
    Create root-level project configuration:

    1. Create package.json with:
       - name: "civic-trivia-championship"
       - private: true
       - Scripts:
         - "dev": "concurrently \"npm run dev:backend\" \"npm run dev:frontend\""
         - "dev:backend": "cd backend && npm run dev"
         - "dev:frontend": "cd frontend && npm run dev"
         - "install:all": "cd backend && npm install && cd ../frontend && npm install"
       - DevDependencies: concurrently

    2. Create .gitignore with:
       - node_modules/
       - dist/
       - .env
       - *.log

    3. Create root .env.example copying backend template for documentation
  </action>
  <verify>
    npm install && npm run install:all
    npm run dev starts both servers concurrently
  </verify>
  <done>
    Single command starts both frontend and backend in development mode
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` from root starts both servers
2. Backend health check: `curl http://localhost:3000/health` returns `{"status":"ok"}`
3. Frontend: http://localhost:5173 shows styled heading
4. TypeScript: No compilation errors in either project
5. Tailwind: Custom teal color renders correctly
</verification>

<success_criteria>
- Backend Express server running on port 3000 with TypeScript
- Frontend Vite React server running on port 5173
- Tailwind CSS configured with Empowered.Vote teal theme
- Both servers start with single `npm run dev` command
- TypeScript compiles without errors in both projects
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-auth/01-01-SUMMARY.md`
</output>
