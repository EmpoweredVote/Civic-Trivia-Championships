---
phase: 23-collection-setup-topic-definition
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - backend/src/db/seed/collections.ts
  - backend/src/scripts/content-generation/locale-configs/fremont-ca.ts
autonomous: true

must_haves:
  truths:
    - "Fremont collection exists in seed file with slug fremont-ca, isActive false, sortOrder 3"
    - "LA collection sortOrder updated from 3 to 4 (no sort order collision)"
    - "Eight topic categories defined with slugs matching distribution keys"
    - "Topic distribution sums to exactly 100 (targetQuestions)"
    - "Civic history gets 20 questions and landmarks/culture gets 18 (history+culture heavy per user decision)"
    - "Budget/finance gets 12 questions (above standard for Tesla/NUMMI story)"
    - "Mission San Jose disambiguation documented in config comments"
    - "Election schedule documented in config comments with November 3, 2026 date"
    - "Source URLs reference real .gov domains for Fremont, Alameda County, regional agencies, and California state"
  artifacts:
    - path: "backend/src/db/seed/collections.ts"
      provides: "Fremont collection metadata and LA sort order fix"
      contains: "fremont-ca"
    - path: "backend/src/scripts/content-generation/locale-configs/fremont-ca.ts"
      provides: "Locale config with 8 topics, distribution, sources, disambiguation"
      exports: ["fremontConfig"]
  key_links:
    - from: "backend/src/scripts/content-generation/locale-configs/fremont-ca.ts"
      to: "backend/src/scripts/content-generation/locale-configs/bloomington-in.ts"
      via: "import type { LocaleConfig }"
      pattern: "import type.*LocaleConfig.*bloomington-in"
    - from: "backend/src/db/seed/collections.ts"
      to: "backend/src/db/schema.ts"
      via: "NewCollection type"
      pattern: "NewCollection"
---

<objective>
Add the Fremont, CA collection to the database seed file and create the locale configuration file with 8 topic categories, weighted distribution targets, RAG source URLs, and Fremont-specific disambiguation/election documentation.

Purpose: This configuration is consumed by Phase 24 (Question Generation). Without it, the generation pipeline has no target collection, topic structure, or source material to work from.
Output: Two files — updated collections seed with Fremont entry + new fremont-ca.ts locale config.
</objective>

<execution_context>
@C:\Users\Chris\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Chris\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/23-collection-setup-topic-definition/23-CONTEXT.md
@.planning/phases/23-collection-setup-topic-definition/23-RESEARCH.md
@backend/src/db/seed/collections.ts
@backend/src/scripts/content-generation/locale-configs/bloomington-in.ts
@backend/src/scripts/content-generation/locale-configs/los-angeles-ca.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Fremont collection to seed file and fix LA sort order</name>
  <files>backend/src/db/seed/collections.ts</files>
  <action>
Modify `backend/src/db/seed/collections.ts` to:

1. Insert a NEW Fremont entry between the Bloomington and LA entries in the `collectionsData` array:
```typescript
{
  name: 'Fremont, CA',
  slug: 'fremont-ca',
  description: 'Five towns, one city — how well do you know Fremont?',
  localeCode: 'en-US',
  localeName: 'Fremont, California',
  iconIdentifier: 'flag-ca',
  themeColor: '#047857', // emerald green
  isActive: false, // Activate in Phase 25 after questions reviewed
  sortOrder: 3
}
```

2. Update the existing LA entry's `sortOrder` from `3` to `4`. Add a comment: `// Updated from 3 to accommodate Fremont`

Key decisions (LOCKED from CONTEXT.md):
- Sort order 3 (between Bloomington=2 and LA, which moves to 4)
- Description: "Five towns, one city — how well do you know Fremont?" (diversity/consolidation angle)
- Theme color: #047857 (emerald green — distinct from Federal blue, Bloomington red, LA ocean blue)
- isActive: false (activated in Phase 25)
- iconIdentifier: flag-ca (same as LA, both California)

Do NOT change Federal or Bloomington entries. Only add Fremont and update LA's sortOrder.
  </action>
  <verify>
Run `npx ts-node --esm backend/src/db/seed/collections.ts 2>/dev/null || echo "Compile check"` — file should have no TypeScript syntax errors.

Manual verification:
- File has exactly 4 entries in collectionsData array
- Sort orders are: 1, 2, 3, 4 (no duplicates)
- Fremont entry has isActive: false
- Fremont slug is 'fremont-ca'
- LA sortOrder is 4 (was 3)
  </verify>
  <done>
collections.ts contains 4 collection entries with unique sort orders (Federal=1, Bloomington=2, Fremont=3, LA=4). Fremont has slug 'fremont-ca', theme '#047857', isActive false. No TypeScript errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Fremont locale config with topics, distribution, sources, and documentation</name>
  <files>backend/src/scripts/content-generation/locale-configs/fremont-ca.ts</files>
  <action>
Create `backend/src/scripts/content-generation/locale-configs/fremont-ca.ts` following the exact pattern from `bloomington-in.ts` and `los-angeles-ca.ts`.

File structure:
1. Import `LocaleConfig` type from `./bloomington-in.js` (matches LA pattern)
2. JSDoc comment block documenting Fremont-specific context (five-town consolidation, Mission San Jose disambiguation, Tesla/NUMMI dual story, Ohlone land acknowledgment level, Little Kabul framing, six-district council)
3. Export `fremontConfig: LocaleConfig` with:

**Config fields:**
- locale: 'fremont-ca'
- name: 'Fremont, California'
- externalIdPrefix: 'fre' (LOCKED decision — fre-001, fre-002, etc.)
- collectionSlug: 'fremont-ca'
- targetQuestions: 100
- batchSize: 25

**8 topic categories (slugs must exactly match topicDistribution keys):**
| slug | name | description focus |
|------|------|-------------------|
| city-government | City Government | mayor, six-district city council, city manager, departments |
| alameda-county | Alameda County & Regional Agencies | county governance PLUS BART, AC Transit, Bay Area regional bodies |
| california-state | California State Government | governor, legislature, ballot propositions (may overlap LA, acceptable) |
| civic-history | Civic History | five-town consolidation (1956), Ohlone land acknowledgment, milestones |
| local-services | Local Services | utilities, parks, police/fire, planning, municipal services |
| elections-voting | Elections & Voting | district-based elections, voting process, Alameda County Registrar |
| landmarks-culture | Landmarks & Culture | Mission San Jose district, Little Kabul, Mission Peak, multicultural identity |
| budget-finance | Budget & Finance | city budget, Tesla economic impact, Measure E, NUMMI redevelopment |

**Topic distribution (MUST sum to exactly 100):**
- city-government: 10
- alameda-county: 10
- california-state: 10
- civic-history: 20 (history heavy per user decision)
- local-services: 10
- elections-voting: 10
- landmarks-culture: 18 (culture heavy per user decision)
- budget-finance: 12 (above standard for Tesla/NUMMI story)

**Source URLs (real .gov domains only):**
City of Fremont: fremont.gov (main, government, mayor-city-council, about-city-government, departments, about, our-story, election-information), fremontpolice.gov
Alameda County: bos.alamedacountyca.gov, acgov.org, acgov.org/government/elected.htm, acvote.alamedacountyca.gov
Regional: bart.gov, bart.gov/about/planning/alameda, actransit.org
California State: ca.gov, gov.ca.gov, legislature.ca.gov, sos.ca.gov/elections

4. After the config export, add trailing comments documenting:

**Election schedule:**
- Mayor: 4-year terms, next election November 3, 2026
- City Council: 4-year terms, staggered by district
- Alameda County Board of Supervisors: 4-year terms, next election November 3, 2026
- Sources: fremont.gov/government/election-information, acvote.alamedacountyca.gov

**Disambiguation notes:**
- Mission San Jose: "Mission San Jose (historic mission)" for 1797 Spanish mission, "Mission San Jose district" for modern neighborhood
- Five towns: Centerville, Niles, Irvington, Mission San José, Warm Springs (consolidated 1956)
- NUMMI/Tesla: Cover economic impact (jobs, tax revenue) AND land use (zoning, environmental review)
  </action>
  <verify>
Run TypeScript compile check: `cd backend && npx tsc --noEmit src/scripts/content-generation/locale-configs/fremont-ca.ts 2>&1 || echo "Check imports manually"`

Manual verification:
- File imports LocaleConfig from './bloomington-in.js'
- exports fremontConfig
- 8 topicCategories entries
- 8 topicDistribution entries
- topicDistribution keys exactly match topicCategories slugs
- Sum of distribution values = 100
- sourceUrls array has 20 entries (9 Fremont + 4 Alameda + 3 Regional + 4 State)
- Election schedule comment present with "November 3, 2026"
- Disambiguation comment present with "Mission San Jose"
  </verify>
  <done>
fremont-ca.ts exports a valid LocaleConfig with 8 topic categories, distribution summing to 100, 20 source URLs from .gov domains, and trailing comments documenting election schedule (November 3, 2026) and Mission San Jose disambiguation rules. TypeScript compiles without errors.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. **Sort order uniqueness:** Grep collections.ts for sortOrder — values should be 1, 2, 3, 4 with no duplicates
2. **Topic slug alignment:** Extract topicCategories slugs and topicDistribution keys from fremont-ca.ts — must be identical sets
3. **Distribution sum:** Sum topicDistribution values — must equal 100
4. **File count:** `ls backend/src/scripts/content-generation/locale-configs/` should show 3 files: bloomington-in.ts, los-angeles-ca.ts, fremont-ca.ts
5. **TypeScript validity:** Both files should compile without errors
6. **No activation:** Fremont isActive must be false (Phase 25 activates)
</verification>

<success_criteria>
- collections.ts has 4 entries with unique sort orders, Fremont at position 3 with isActive: false
- fremont-ca.ts exists with valid LocaleConfig export, 8 topics, distribution summing to 100
- Election schedule and disambiguation rules documented in comments
- Phase 24 can consume fremont-ca.ts config without modification
</success_criteria>

<output>
After completion, create `.planning/phases/23-collection-setup-topic-definition/23-01-SUMMARY.md`
</output>
