---
phase: 10-game-ux-improvements
plan: 02
type: execute
wave: 2
depends_on: ["10-01"]
files_modified:
  - frontend/src/features/game/components/GameScreen.tsx
  - frontend/src/features/game/components/QuestionCard.tsx
  - frontend/src/features/game/components/AnswerGrid.tsx
  - frontend/src/features/game/components/ScoreDisplay.tsx
autonomous: false

must_haves:
  truths:
    - "Question card positioned at ~1/3 from top on desktop, ~1/4 on mobile"
    - "Answer grid is 2x2 on desktop, single column on mobile"
    - "Answer buttons have bold hover glow, press-down animation, and pulsing glow during suspense"
    - "Non-selected answers dim to ~30% opacity after answer locks in"
    - "Lock In button only appears for Q10 (not Q1-Q9)"
    - "Score display hidden during answering, visible during reveal/transitions"
    - "Question text is larger/bolder than answer text, question number is subtle"
    - "Question and answer area max-width ~700px centered"
    - "Slide transitions between questions are faster (0.2s)"
    - "Timer positioned below answers for visual hierarchy flow"
  artifacts:
    - path: "frontend/src/features/game/components/GameScreen.tsx"
      provides: "Repositioned layout with visual hierarchy, score visibility toggle, faster transitions"
      contains: "pt-24 md:pt-[33vh]"
    - path: "frontend/src/features/game/components/QuestionCard.tsx"
      provides: "Larger question text, subtle question number"
      contains: "text-3xl md:text-4xl"
    - path: "frontend/src/features/game/components/AnswerGrid.tsx"
      provides: "Single-click interaction, hover glow, press animation, pulsing glow, dimming"
      contains: "whileTap"
    - path: "frontend/src/features/game/components/ScoreDisplay.tsx"
      provides: "Score display (unchanged internally, visibility controlled by parent)"
  key_links:
    - from: "GameScreen.tsx selectAnswer call"
      to: "useGameState.ts selectAnswer"
      via: "passes currentTimeRemaining as second arg"
      pattern: "selectAnswer.*currentTimeRemaining"
    - from: "AnswerGrid.tsx onSelect"
      to: "GameScreen.tsx selectAnswer wrapper"
      via: "callback prop with timeRemaining"
      pattern: "onSelect.*index.*timeRemaining"
    - from: "GameScreen.tsx score visibility"
      to: "state.phase check"
      via: "conditional rendering based on phase"
      pattern: "phase.*answering.*score"
---

<objective>
Implement the visual layout repositioning, answer interaction polish (hover, press, glow, dimming), visual hierarchy (score visibility, text sizing), and faster transitions.

Purpose: This transforms the game feel from functional to polished game-show experience. Layout repositioning guides the eye, interaction feedback makes answers feel decisive, and pacing feels snappy.

Output: Repositioned GameScreen layout, polished AnswerGrid with tactile interactions, updated QuestionCard typography, and conditional score visibility.
</objective>

<execution_context>
@C:\Users\Chris\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Chris\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-game-ux-improvements/10-CONTEXT.md
@.planning/phases/10-game-ux-improvements/10-RESEARCH.md
@.planning/phases/10-game-ux-improvements/10-01-SUMMARY.md

# Source files being modified
@frontend/src/features/game/components/GameScreen.tsx
@frontend/src/features/game/components/QuestionCard.tsx
@frontend/src/features/game/components/AnswerGrid.tsx
@frontend/src/features/game/components/ScoreDisplay.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Reposition layout and update visual hierarchy in GameScreen and QuestionCard</name>
  <files>
    frontend/src/features/game/components/GameScreen.tsx
    frontend/src/features/game/components/QuestionCard.tsx
  </files>
  <action>
**GameScreen.tsx changes:**

1. Update `QUESTION_DURATION` constant from `25` to `20` (matches pacing decision). Keep `FINAL_QUESTION_DURATION = 50` unchanged. Update `QUESTION_PREVIEW_MS` from `2000` to `1000`.

2. Restructure the Top HUD layout. Currently it has quit button, progress dots, score display, and timer all in one row. Reorganize:
   - Top bar: quit button (left), question number indicator (center, small muted text like "Q3 of 10"), progress dots (right)
   - Score display: conditionally render based on phase. Hide during 'answering' phase (when showOptions is true and user is actively answering). Show during 'revealing', 'locked', and transition phases. Wrap ScoreDisplay in a conditional: `{(state.phase === 'revealing' || state.phase === 'locked' || state.phase === 'complete' || !showOptions) && <ScoreDisplay ... />}`.
   - Timer: move from the top HUD to BELOW the answer grid area. Place it after the AnswerGrid component inside the question/answer motion.div, so the visual flow is: question -> options -> timer. Style the timer container: `<div className="flex justify-center mt-6">`.

3. Reposition the question/answer area. Change the motion.div (currently `className="flex-1 flex flex-col justify-start pt-[10vh] gap-12"`) to:
   - `className="flex-1 flex flex-col items-center pt-24 md:pt-[33vh] gap-8 md:gap-12 max-w-[700px] mx-auto w-full px-4"`
   - This positions at 1/4 from top on mobile (pt-24 = 96px), 1/3 on desktop (33vh)
   - Max-width 700px keeps content centered and readable
   - Reduced gap on mobile (gap-8) for more answer room

4. Update the slide transition speed from 0.3s to 0.2s: `transition={{ duration: reducedMotion ? 0 : 0.2 }}`

5. Wire the `selectAnswer` call to pass `currentTimeRemaining`: wherever GameScreen calls `selectAnswer(index)`, change to `selectAnswer(index, currentTimeRemaining)`. This is needed because Plan 01 changed selectAnswer to accept timeRemaining for Q1-Q9 immediate submission.

6. Update the global keyboard handler (lines 172-185): currently calls `selectAnswer(index)`. Change to `selectAnswer(index, currentTimeRemaining)`. Also update the canUseKeyboard check: remove `state.phase === 'selected'` for Q1-Q9 since that phase is now Q10-only. Update to: `const canUseKeyboard = state.phase === 'answering' && showOptions;` (keyboard selection during Q10's 'selected' phase is handled by AnswerGrid's own keydown handler).

7. Update the escape key handler (lines 188-201): remove `state.phase === 'selected'` check since Q1-Q9 skip that phase. Keep it for Q10: `if ((state.phase === 'answering' || (state.phase === 'selected' && state.currentQuestionIndex === 9)) && !state.isPaused)`.

8. Update timer threshold announcements (lines 203-212): remove `state.phase === 'selected'` check (same reasoning).

9. Remove the question number from QuestionCard rendering and put it in the top HUD instead (see point 2 above). The question number in the top bar should be: `<span className="text-slate-500 text-xs font-medium uppercase tracking-wider">Q{state.currentQuestionIndex + 1} of 10</span>`.

10. The answer grid AnimatePresence condition (line 466): update from `showOptions || state.phase === 'selected' || state.phase === 'locked' || state.phase === 'revealing'` to `showOptions || state.phase === 'locked' || state.phase === 'revealing' || (state.phase === 'selected' && state.currentQuestionIndex === 9)`.

11. The Learn More button position: keep it below answer options after reveal (existing behavior matches the decision). Move it inside the max-width container for alignment.

**QuestionCard.tsx changes:**

1. Make question text larger and bolder: change from `text-2xl md:text-3xl font-semibold` to `text-3xl md:text-4xl font-bold`. This establishes clear visual dominance over answer options.

2. Remove the question number display (it's now in the GameScreen top HUD). Delete the "Question {questionNumber} of 10" div entirely.

3. Keep the topic badge but make it slightly more subtle: change from `text-teal-400 text-sm` to `text-teal-400/70 text-xs`. This ensures the topic doesn't compete with the question text.

4. Update the QuestionCard props interface: `questionNumber` can remain for accessibility (aria-label) but remove the visible rendering.

Do NOT use CSS custom property --vh for viewport height -- the research flagged this as a potential concern but pt-24 (fixed pixels) on mobile avoids the issue entirely.
Do NOT remove the topic badge -- it provides useful context.
  </action>
  <verify>
Run `cd "C:/Project Test/frontend" && npx tsc --noEmit` -- zero errors. Run `cd "C:/Project Test/frontend" && npm run build` -- build succeeds. Visually check: search GameScreen.tsx for `pt-24 md:pt-[33vh]` and `max-w-[700px]`. Confirm QuestionCard.tsx has `text-3xl md:text-4xl font-bold` for question text.
  </verify>
  <done>
Question card at 1/3 from top on desktop, 1/4 on mobile. Max-width 700px. Timer below answers. Score hidden during active answering. Question text larger/bolder. Question number subtle in top HUD. Slide transitions at 0.2s. selectAnswer passes timeRemaining.
  </done>
</task>

<task type="auto">
  <name>Task 2: Polish AnswerGrid with hover glow, press animation, pulsing suspense, and dimming</name>
  <files>
    frontend/src/features/game/components/AnswerGrid.tsx
  </files>
  <action>
**AnswerGrid.tsx changes:**

1. Update the `onSelect` prop type to pass timeRemaining: change the interface from `onSelect: (index: number) => void` to `onSelect: (index: number) => void` (the parent GameScreen already wraps to include timeRemaining, so AnswerGrid's prop stays the same -- it just calls `onSelect(index)` and the parent closure handles timeRemaining).

2. Add Framer Motion `whileTap` for press-down animation on each answer button:
   ```tsx
   whileTap={canSelect ? { scale: 0.95 } : undefined}
   ```
   Only active when user can select. Use spring transition for the tap: `transition={{ scale: { type: "spring", stiffness: 400, damping: 17 } }}`.

3. Add bold hover effect to `getOptionStyle` default state. Change from:
   `'bg-slate-800 border-slate-500 hover:border-teal-500 hover:bg-slate-700'`
   to:
   `'bg-slate-800 border-slate-500 hover:border-teal-400 hover:bg-slate-700 hover:shadow-lg hover:shadow-teal-400/20 transition-all duration-200'`
   This adds a teal glow on hover that signals "click = final answer".

4. Add pulsing glow effect on the selected answer during 'locked' phase (suspense). In the `animate` prop of motion.button, add conditional boxShadow animation:
   ```tsx
   animate={{
     scale: getOptionScale(index),
     opacity: isRevealing && index !== correctAnswer && index !== selectedOption ? 0.3 : 1,
     ...(phase === 'locked' && selectedOption === index ? {
       boxShadow: [
         '0 0 8px rgba(20, 184, 166, 0.4)',
         '0 0 24px rgba(20, 184, 166, 0.8)',
         '0 0 8px rgba(20, 184, 166, 0.4)',
       ],
     } : { boxShadow: '0 0 0px rgba(0,0,0,0)' }),
   }}
   ```
   Add transition for boxShadow: `boxShadow: { duration: 0.75, repeat: Infinity, ease: "easeInOut" }` within the transition prop.

5. Dim non-selected answers after selection. Update the opacity in animate:
   - During 'locked' phase: non-selected options should fade to 0.3 opacity
   - During 'revealing' phase: non-selected, non-correct options stay at 0.3
   ```tsx
   opacity: (() => {
     // During locked phase (suspense): dim non-selected
     if (phase === 'locked' && selectedOption !== null && index !== selectedOption) return 0.3;
     // During reveal: dim non-selected, non-correct
     if (isRevealing && index !== correctAnswer && index !== selectedOption) return 0.3;
     return 1;
   })(),
   ```

6. Conditionally show the "Lock In" button only for Q10. The AnswerGrid currently shows it when `phase === 'selected'`. Since only Q10 reaches 'selected' phase now (Plan 01 ensured this), this already works correctly. No change needed to the Lock In button rendering logic -- it will only appear for Q10 naturally.

7. Update keyboard handler: the Enter/Space handler currently has logic for 'selected' phase calling `onLockIn()`. This is now Q10-only behavior and still correct. But update the number key handler within AnswerGrid: when a number key is pressed and phase is 'answering', call `onSelect(selectedIdx)` (same as current). Remove the special handling for 'selected' phase number keys for Q1-Q9 since they can't be in 'selected' anymore.

8. Update `canSelect` logic: currently `const canSelect = isAnswering && !isLocked;` where `isAnswering = phase === 'answering' || phase === 'selected'`. For Q1-Q9, phase goes directly to 'locked' so `isAnswering` is never true in 'selected' for those. For Q10, user CAN change selection during 'selected' phase. The current logic already handles this correctly since Q10 will be in 'selected' which is included in `isAnswering`. No change needed.

9. Add the `useReducedMotion` hook import and use it to skip whileTap and pulsing glow when reduced motion is preferred:
   ```tsx
   import { useReducedMotion } from '../../../hooks/useReducedMotion';
   // ...
   const reducedMotion = useReducedMotion();
   // ...
   whileTap={canSelect && !reducedMotion ? { scale: 0.95 } : undefined}
   ```
   For the pulsing glow, when reduced motion is on, show a static glow instead of pulsing:
   ```tsx
   ...(phase === 'locked' && selectedOption === index
     ? reducedMotion
       ? { boxShadow: '0 0 16px rgba(20, 184, 166, 0.6)' }  // Static glow
       : { boxShadow: ['0 0 8px ...', '0 0 24px ...', '0 0 8px ...'] }  // Pulsing
     : { boxShadow: '0 0 0px rgba(0,0,0,0)' })
   ```

Do NOT remove the existing shake animation for wrong answers -- it stays as-is (controlled by GameScreen).
Do NOT change the 2x2 grid layout -- it's already `grid-cols-1 md:grid-cols-2` which matches the decision.
Do NOT add `will-change: transform` -- Framer Motion handles GPU optimization internally.
  </action>
  <verify>
Run `cd "C:/Project Test/frontend" && npx tsc --noEmit` -- zero errors. Run `cd "C:/Project Test/frontend" && npm run build` -- build succeeds. Grep AnswerGrid.tsx for `whileTap` to confirm press animation exists. Grep for `boxShadow.*rgba(20, 184, 166` to confirm pulsing glow. Grep for `opacity.*0.3` to confirm dimming logic.
  </verify>
  <done>
Answer buttons have bold hover glow effect. Press-down animation (scale 0.95) on tap. Pulsing teal glow during 0.75s suspense on selected answer. Non-selected answers dim to 30% opacity. Reduced motion users get static glow instead of pulsing. Lock In button only appears for Q10. All code compiles cleanly.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete game UX overhaul: single-click answering (Q1-Q9), repositioned layout (1/3 from top), snappier pacing (1s preview, 0.75s suspense, 4s auto-advance, 20s timer), bold hover effects, press-down animation, pulsing glow during suspense, non-selected answer dimming, score hidden during answering, larger question text, timer below answers.</what-built>
  <how-to-verify>
1. Start the dev server: `cd frontend && npm run dev`
2. Start a new game (Quick Play)
3. **Single-click test (Q1-Q9):** Click any answer -- it should immediately lock in with NO "Lock In" button appearing. Timer should stop instantly. Selected answer should pulse with teal glow for ~0.75s, then reveal correct/incorrect.
4. **Hover test:** Before answering, hover over answer buttons -- should see teal border glow and shadow effect. Should feel like "this click is final."
5. **Press animation test:** Click an answer and watch for brief scale-down (0.95x) on press, then bounce back.
6. **Dimming test:** After selecting, non-selected answers should fade to ~30% opacity during suspense and reveal.
7. **Layout test:** Question should be positioned at roughly 1/3 from top of screen on desktop. Timer should be BELOW the answer grid. Score should be hidden while answering and appear during reveal.
8. **Pacing test:** Overall flow should feel noticeably snappier -- options appear after ~1s (not 2s), suspense is ~0.75s (not 1.5s), auto-advance is ~4s (not 6s).
9. **Q10 wager test:** Play through to Q10 -- should still have two-step: click answer, then "Lock In" button appears. Wager flow should work normally.
10. **Mobile test:** Resize browser to mobile width. Question should be higher (~1/4 from top). Answers should be single column. Touch targets should be at least 48px.
11. **Keyboard test:** Press 1-4 to select answer -- should immediately lock in (Q1-Q9). Arrow keys should navigate between options.
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `cd "C:/Project Test/frontend" && npx tsc --noEmit` -- zero TypeScript errors across all modified files
2. `cd "C:/Project Test/frontend" && npm run build` -- production build succeeds
3. Manual play-through: start game, answer Q1-Q9 with single click, verify Q10 two-step, verify all animations
4. Responsive check: desktop (1/3 from top) and mobile (1/4 from top) positioning
5. Accessibility: keyboard navigation works, reduced motion skips animations, screen reader announces correctly
</verification>

<success_criteria>
- Question positioned at 1/3 from top (desktop), 1/4 from top (mobile)
- Single-click answering for Q1-Q9 with immediate lock-in
- Q10 preserves two-step lock-in with Lock In button
- Bold hover, press-down, pulsing glow, and dimming all work
- Visual hierarchy: question (large/bold) -> options -> timer (below)
- Score hidden during answering, visible during reveal
- All timing changes applied and feel snappy
- User approves visual polish via checkpoint
</success_criteria>

<output>
After completion, create `.planning/phases/10-game-ux-improvements/10-02-SUMMARY.md`
</output>
