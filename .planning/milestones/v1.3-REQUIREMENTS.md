# Requirements Archive: v1.3 Question Quality & Admin Tools

**Archived:** 2026-02-20
**Status:** SHIPPED

This is the archived requirements specification for v1.3.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1.3 Requirements

### Admin Foundation

- [x] **ADMN-01**: Admin role column (`is_admin`) on users table with migration
- [x] **ADMN-02**: Admin role-check middleware protecting all `/api/admin` routes
- [x] **ADMN-03**: Frontend admin route guard (redirect non-admins away from `/admin`)

### Question Quality Rules

- [x] **QUAL-01**: Codified quality rules as TypeScript functions (dinner party test, civic utility, no pure lookup facts, reasoning possible)
- [x] **QUAL-02**: Two-tier rule severity — blocking rules (auto-flag for removal) vs advisory rules (flag for review)
- [x] **QUAL-03**: Dry-run audit of all 320 existing questions against quality rules with report
- [x] **QUAL-04**: Remove/archive questions that fail blocking rules
- [x] **QUAL-05**: Generate replacement questions to maintain collection sizes

### Admin Exploration UI

- [x] **EXPL-01**: Sortable, filterable question table (by collection, difficulty, quality score, telemetry stats)
- [x] **EXPL-02**: Question detail view showing full question, options, explanation, Learn More, and metadata
- [x] **EXPL-03**: Collection health dashboard (question counts, difficulty distribution, quality scores, telemetry summary)
- [x] **EXPL-04**: Admin API endpoints for question listing, detail, and collection health

### Telemetry

- [x] **TELE-01**: `encounter_count` and `correct_count` columns on questions table
- [x] **TELE-02**: Increment counters during gameplay (fire-and-forget on answer submission)
- [x] **TELE-03**: Calculated difficulty rate (correct/encounters) displayed in admin UI

### AI Generation Pipeline

- [x] **GENR-01**: Quality rules integrated into generation prompts (prevent bad questions at creation)
- [x] **GENR-02**: Post-generation validation script that runs quality rules on generated batches
- [x] **GENR-03**: State-level generation template (distinct from city-level — different government structures)

### New Collections

- [x] **COLL-01**: Indiana state question collection (~80-100 questions)
- [x] **COLL-02**: California state question collection (~80-100 questions)

### Admin Question Editing

- [x] **EDIT-01**: Edit question text, options, explanation, source URL, and difficulty from the detail panel
- [x] **EDIT-02**: Automatic quality re-scoring after save (re-run rules, update quality_score and violation_count)
- [x] **EDIT-03**: Optimistic table row update after successful save (no full page reload)

## Future Requirements

Deferred to later milestones. Tracked but not in current roadmap.

### Multiplayer & Live Features

- **MULT-01**: Team/multiplayer game mode
- **MULT-02**: Real-time WebSocket game features
- **MULT-03**: Wits & Wagers-style numeric/date answer questions (spectrum display, closest wins)

### Advanced Analytics

- **ANLY-01**: Auto-difficulty calibration based on telemetry data
- **ANLY-02**: Distractor analysis (which wrong answers get picked most)
- **ANLY-03**: Quality trend tracking over time

### Content Scaling

- **SCAL-01**: Volunteer question authoring portal
- **SCAL-02**: Collection search/browse (when enough collections exist)
- **SCAL-03**: Location-based auto-assignment of collections

## Out of Scope

| Feature | Reason |
|---------|--------|
| Granular admin permissions (editor, reviewer roles) | Only a few admins for now; boolean is_admin sufficient |
| Public-facing admin UI | Admin is internal dev/author tool only |
| Real-time telemetry dashboard | Batch/on-demand stats sufficient at current scale |
| Dynamic rule loading / rule editor UI | Rules are TypeScript functions maintained by devs |
| Automated question approval | Automated checks are gatekeepers, not approvers — human review required |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| ADMN-01 | Phase 18 | Complete |
| ADMN-02 | Phase 18 | Complete |
| ADMN-03 | Phase 18 | Complete |
| TELE-01 | Phase 18 | Complete |
| TELE-02 | Phase 18 | Complete |
| QUAL-01 | Phase 19 | Complete |
| QUAL-02 | Phase 19 | Complete |
| QUAL-03 | Phase 19 | Complete |
| QUAL-04 | Phase 19 | Complete |
| EXPL-01 | Phase 20 | Complete |
| EXPL-02 | Phase 20 | Complete |
| EXPL-03 | Phase 20 | Complete |
| EXPL-04 | Phase 20 | Complete |
| TELE-03 | Phase 20 | Complete |
| GENR-01 | Phase 21 | Complete |
| GENR-02 | Phase 21 | Complete |
| GENR-03 | Phase 21 | Complete |
| QUAL-05 | Phase 21 | Complete |
| COLL-01 | Phase 21 | Complete |
| COLL-02 | Phase 21 | Complete |
| EDIT-01 | Phase 22 | Complete |
| EDIT-02 | Phase 22 | Complete |
| EDIT-03 | Phase 22 | Complete |

**Coverage:**
- v1.3 requirements: 23 total
- Shipped: 23
- Adjusted: 0
- Dropped: 0

## Milestone Summary

**Shipped:** 23 of 23 v1.3 requirements
**Adjusted:** None — all requirements delivered as originally scoped
**Dropped:** None

---
*Archived: 2026-02-20 as part of v1.3 milestone completion*
