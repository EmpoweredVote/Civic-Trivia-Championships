# Milestone v1.4: Fremont, CA Collection

**Status:** ✅ SHIPPED 2026-02-21
**Phases:** 23-26
**Total Plans:** 6

## Overview

Add a Fremont, CA community collection with 92 quality questions, proper expiration dates for time-sensitive content, and a Mission Peak banner image — following established patterns from Bloomington and LA.

## Phases

### Phase 23: Collection Setup & Topic Definition

**Goal**: Fremont collection configuration and topic structure ready for content generation
**Depends on**: Nothing (uses existing v1.2/v1.3 infrastructure)
**Plans**: 1 plan

Plans:
- [x] 23-01: Add Fremont collection to seed file and create locale config with topics, distribution, sources, and documentation

**Details:**
- Fremont collection added to seed file with slug `fremont-ca`, sortOrder 3, emerald green theme
- Eight topic categories defined: city government (10), alameda county (10), california state (10), civic history (20), local services (10), elections & voting (10), landmarks & culture (18), budget & finance (12)
- Locale config with 20 .gov RAG source URLs, election schedule documentation, disambiguation rules
- History + culture heavy distribution (38% total), Tesla/NUMMI elevated budget allocation (12 questions)

---

### Phase 24: Question Generation & Review

**Goal**: 80-100 active, quality-validated Fremont questions ready for gameplay
**Depends on**: Phase 23
**Plans**: 3 plans

Plans:
- [x] 24-01: Register Fremont locale in generation pipeline, enhance system prompt with sensitivity notes and quality guidelines, fetch RAG sources
- [x] 24-02: Generate ~130 Fremont questions with quality validation retry loop, seed as draft to database
- [x] 24-03: Spot-check sample for cultural sensitivity, curate to ~100 best questions, activate final set

**Details:**
- Fremont locale registered with sensitivity-aware system prompts (Ohlone, Afghan-American, Tesla/NUMMI, Mission San Jose)
- Quality guidelines embedded in system prompts for all locales (not just Fremont)
- 123 questions generated with overshoot factor 1.3, quality validation caught 5 violations during generation
- Human spot-check of 27-question sample approved with no cultural sensitivity issues
- 92 questions curated and activated from pool of 123, all 8 topics represented
- Difficulty distribution: 23% easy, 51% medium, 26% hard

---

### Phase 25: Image, Seed & Activation

**Goal**: Fremont collection activated and visible in collection picker with branded image
**Depends on**: Phase 24
**Plans**: 1 plan

Plans:
- [x] 25-01: Add Mission Peak banner image, export 92 active questions to JSON with status filter, register Fremont in seed script

**Details:**
- Mission Peak from Lake Elizabeth banner image (public domain, Wikimedia Commons, 40KB 800x450)
- Status='active' filter added to export script (benefits all collections)
- 92 active questions exported to fremont-ca-questions.json
- Fremont registered in seed-community.ts LOCALES array

---

### Phase 26: Verification & Production Testing

**Goal**: Fremont collection verified as production-ready with end-to-end playability
**Depends on**: Phase 25
**Plans**: 1 plan

Plans:
- [x] 26-01: Deploy, verify all 7 criteria, and finalize v1.4 milestone

**Details:**
- Comprehensive production verification script checking all 7 success criteria
- Deployed to production via git push, seeded Fremont collection to Supabase
- All 7 criteria passed: 92 active questions, 8-question game sessions, end-to-end playability, Fremont-specific content, difficulty balance, expiration system, admin API

---

## Milestone Summary

**Key Decisions:**
- History + culture heavy distribution (38% of questions) for Fremont's unique consolidation story
- Elevated budget-finance allocation (12 questions) for Tesla/NUMMI economic transition narrative
- Fremont sortOrder 3 (between Bloomington and LA)
- Accept 92 active questions (below 95 target but within acceptable range)
- Accept medium-heavy difficulty distribution (23/51/26 vs 40/40/20 target)
- Mission Peak from Lake Elizabeth as banner (public domain, Wikimedia Commons)
- Status filter applied to ALL collection exports, not just Fremont
- Quality guidelines embedded in system prompts for all locales

**Issues Resolved:**
- API rate limiting during generation (solved with 70-second pauses between batches)
- Regeneration schema validation bug (BatchSchema vs QuestionSchema for single questions)
- Collections API parsing in verification script (object vs array response format)
- Federal questions incorrectly linked to Fremont collection (fixed in seed script)

**Issues Deferred:**
- civic-history under-represented (14 vs 20 target) — acceptable for launch, supplement later
- Generation report only captures last batch (not aggregate) — minor, database has all data
- 31 draft questions retained for potential future activation

**Technical Debt Incurred:**
- None significant — followed established patterns from v1.2/v1.3

---

_For current project status, see .planning/ROADMAP.md_
